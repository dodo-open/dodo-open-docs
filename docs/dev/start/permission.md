# 权限

## 接口权限表

|分组|接口|需求权限|
|:----|:----|:----|
|机器人API|获取机器人信息|不需要权限|
||机器人退群|不需要权限|
||获取机器人邀请列表|不需要权限|
||添加成员到机器人邀请列表|不需要权限|
||移除成员出机器人邀请列表|不需要权限|
|||
|群API|获取群列表|不需要权限|
||获取群信息|不需要权限|
||获取群等级排行榜|不需要权限|
||获取群禁言名单|成员管理-管理成员|
||获取群封禁名单|成员管理-管理成员|
|||
|频道API|获取频道列表|通用权限-查看频道|
||获取频道信息|通用权限-查看频道|
||创建频道|通用权限-管理频道与分组|
||编辑频道|通用权限-管理频道与分组 或 通用权限-编辑频道、通用权限-查看频道|
||删除频道|通用权限-管理频道与分组、通用权限-查看频道|
|||
|频道消息API|发送消息|通用权限-查看频道、文字频道-发送消息|
||编辑消息|通用权限-查看频道、文字频道-发送消息|
||撤回消息|通用权限-查看频道、文字频道-管理消息|
||置顶消息|通用权限-查看频道、文字频道-管理消息|
||获取消息反应列表|通用权限-查看频道|
||获取消息反应内成员列表|通用权限-查看频道|
||添加表情反应|通用权限-查看频道、文字频道-添加新反应|
||取消表情反应|通用权限-查看频道、文字频道-管理消息|
|||
|语音频道API|获取成员语音频道状态|通用权限-查看频道|
||移动语音频道成员|通用权限-查看频道、语音频道-移动成员|
||管理语音中的成员|通用权限-查看频道、语音频道-管理语音|
|||
|帖子频道API|发布帖子|通用权限-查看频道、帖子频道-发布帖子|
||删除帖子评论回复|通用权限-查看频道、帖子频道-删除帖子|
|||
|身份组API|获取身份组列表|不需要权限|
||创建身份组|通用权限-管理权限与身份组|
||编辑身份组|通用权限-管理权限与身份组|
||删除身份组|通用权限-管理权限与身份组|
||获取身份组成员列表|通用权限-管理权限与身份组|
||赋予成员身份组|通用权限-管理权限与身份组|
||取消成员身份组|通用权限-管理权限与身份组|
|||
|成员API|获取成员列表|群内开通成员隐私保护模式时，需要机器人拥有成员管理-管理成员权限|
||获取成员信息|群内开通成员隐私保护模式时，需要机器人拥有成员管理-管理成员权限|
||获取成员身份组列表|不需要权限|
||获取成员邀请信息|高级权限-超级管理员|
||编辑成员群昵称|成员管理-管理成员|
||禁言成员|成员管理-管理成员|
||取消成员禁言|成员管理-管理成员|
||永久封禁成员|成员管理-管理成员|
||取消成员永久封禁|成员管理-管理成员|
|||
|赠礼系统API|获取群收入|高级权限-超级管理员|
||获取成员分成管理|高级权限-超级管理员|
||获取内容礼物列表|通用权限-查看频道|
||获取内容礼物内成员列表|通用权限-查看频道|
||获取内容礼物总值列表|通用权限-查看频道|
|||
|积分系统API|查询成员积分|高级权限-超级管理员|
||管理成员积分|高级权限-超级管理员|
|||
|私信API|发送私信|不需要权限|
|||
|资源API|上传资源图片|不需要权限|


## 事件权限表

|分组|事件|需求权限|
|:----|:----|:----|
|频道消息Event|消息事件|通用权限-查看频道|
||消息表情反应事件|通用权限-查看频道|
||卡片消息按钮事件|通用权限-查看频道|
||卡片消息表单回传事件|通用权限-查看频道|
||卡片消息列表回传事件|通用权限-查看频道|
|||
|语音频道Event|成员加入语音频道事件|通用权限-查看频道|
||成员退出语音频道事件|通用权限-查看频道|
|||
|帖子频道Event|帖子发布事件|通用权限-查看频道|
||帖子评论回复事件|通用权限-查看频道|
|||
|成员Event|成员加入事件|不需要权限|
||成员退出事件|不需要权限|
||成员邀请事件|高级权限-超级管理员|
|||
|赠礼系统Event|赠礼成功事件|高级权限-超级管理员|
|||
|积分系统Event|积分变更事件|高级权限-超级管理员|
|||
|商城系统Event|商品购买成功事件|高级权限-超级管理员|
|||
|私信Event|私信事件|不需要权限|


## 权限值说明

权限值用于判断是否拥有某些权限，每个权限都拥有对应的比特位，不同权限的比特位进行位或运算，再进行十六进制转换，得到最终权限值。

### 规则

```json
权限值 = 十进制转十六进制 ( 1 << A权限比特位 | 1 << B权限比特位 | 1 << C权限比特位 )
```

### 伪代码

#### 场景一

得到具有 `高级权限-超级管理员` 权限的身份组权限值

```json
算式：十进制转十六进制 ( 1 << 3 )
结果：8
```

#### 场景二

得到具有 `通用权限-编辑频道`、`通用权限-查看频道`、`通用权限-管理权限与身份组`、`通用权限-管理群表情包` 权限的身份组权限值

```json
算式：十进制转十六进制 ( 1 << 6 | 1 << 7 | 1 << 8 | 1 << 9 )
结果：3c0
```

### 值列表

|分组|权限名称|权限说明|比特位|十进制值|十六进制值|
|:----|:----|:----|:----|:----|:----|
|通用权限|管理频道与分组|允许成员新建、删除频道、分组、群应用，和对其进行排序|0|1|1|
||编辑频道|允许成员编辑频道的名称、公告、权限|1|2|2|
||查看频道|允许成员查看频道、没有此权限的人无法在频道列表看到频道|6|64|40|
||管理权限与身份组|允许成员创建新的身份组；删除、编辑、比自己最高身份组等级低的身份组；编辑低等级身份组的权限|7|128|80|
||管理群表情包|允许成员上传、删除、群表情包，还可以进行排序|8|256|100|
||@所有人和身份组|允许成员可以@所有人，以及@比自己最高身份组等级低的身份组|9|512|200|
||搜索内容|允许成员搜索频道内的内容（暂时仅搜索帖子内容）|20|1048576|100000|
|成员管理|管理成员|允许成员移除、封禁、禁言、警告成员，还可以审核新成员入群|2|4|4|
||修改群昵称|允许成员修改自己的群昵称|4|16|10|
||管理群昵称|允许成员修改任意成员的群昵称|5|32|20|
|文字频道|发送消息|允许成员在文字频道发送文字、图片、视频等消息|10|1024|400|
||管理消息|允许成员可以在文字频道内管理置顶消息和撤回任意成员发送的消息|11|2048|800|
||添加新反应|允许成员在文字频道添加新的表情反应。若没有此权限，则只能在已有的表情反应上做出反应|12|4096|1000|
|帖子频道|发布帖子|允许成员在帖子频道发布帖子|13|8192|2000|
||发布评论|允许成员在帖子频道发布评论和回复评论|21|2097152|200000|
||管理帖子|允许成员对帖子进行置顶、设为精华、移动到其他频道的操作|14|16384|4000|
||删除帖子|允许成员删除他人的帖子、以及帖子下面他人的评论与回复|15|32768|8000|
|语音频道|连接|允许成员连接语音频道，并听到其他人说话|16|65536|10000|
||说话|连接语音频道后，允许成员开麦说话|17|131072|20000|
||管理语音|允许成员禁用其他人的麦克风、断开其他人的语音连接|18|262144|40000|
||移动成员|允许成员在自己有此权限的语音频道间移动其他成员（仅PC端）|19|524288|80000|
|高级权限|超级管理员|赋予对方和群主一样的权限（除了解散群），建议只给予非常信赖伙伴，慎重适用|3|8|8|